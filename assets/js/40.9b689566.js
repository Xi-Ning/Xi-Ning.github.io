(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{402:function(s,t,a){"use strict";a.r(t);var n=a(33),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_6-用流收集数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-用流收集数据"}},[s._v("#")]),s._v(" 6 用流收集数据")]),s._v(" "),a("Seal",{attrs:{type:"2",title:"Java 8 实战",author:"（英）Raoul-Gabriel Urma（意）Mario Fusco（英）Alan Myscroft",translator:"陆明刚，劳佳",publisher:"人民邮电出版社",publishDate:"2016.04",createDate:"2022.01.03",modifyDate:"2022.01.03",footer:"竢实扬华 · 自强不息"}}),s._v(" "),a("h2",{attrs:{id:"_6-1-收集器简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-收集器简介"}},[s._v("#")]),s._v(" 6.1 收集器简介")]),s._v(" "),a("h3",{attrs:{id:"_6-1-1-函数式编程与指令式编程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-1-函数式编程与指令式编程"}},[s._v("#")]),s._v(" 6.1.1 函数式编程与指令式编程")]),s._v(" "),a("p",[s._v("指令式风格的代码：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Currency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Transaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" transactionsByCurrencies "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Transaction")]),s._v(" transaction "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" transactions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Currency")]),s._v(" currency "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCurrency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Transaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" transactionsForCurrency "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" transactionsByCurrencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currency"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("transactionsForCurrency "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        transactionsForCurrency "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        transactionsByCurrencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("currency"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" transactionsForCurrency"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    transactionsForCurrency"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("上面的代码如果用收集器（函数式编程风格）来实现，可以用一句话来完成：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Currency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Transaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" transactionsByCurrencies "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" transactions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("collect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupingBy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Transaction")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCurrency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("函数式编程的主要优势有：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("只需指出希望的结果（做什么），而不用操心执行的步骤（怎么做）；")])]),s._v(" "),a("li",[a("p",[s._v("更易复合和重用（如果上述代码再增加多级分组的需求，指令式代码会变得更难阅读、更难维护、更难修改）。")])])]),s._v(" "),a("h3",{attrs:{id:"_6-1-2-收集器用作高级归约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-2-收集器用作高级归约"}},[s._v("#")]),s._v(" 6.1.2 收集器用作高级归约")]),s._v(" "),a("p",[s._v("收集器非常有用，因为它可以简洁而灵活地定义"),a("code",[s._v("collect")]),s._v("用来生成结果集合的标准。更具体地说，对流调用"),a("code",[s._v("collect")]),s._v("方法将对流中的元素触发一个归约操作（由"),a("code",[s._v("Collector")]),s._v("来参数化）。")]),s._v(" "),a("p",[a("code",[s._v("Collectors.toList")]),s._v("是最直接、最常用的收集器，它会把流中所有的元素收集到一个List中。")]),s._v(" "),a("h3",{attrs:{id:"_6-1-3-预定义收集器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-3-预定义收集器"}},[s._v("#")]),s._v(" 6.1.3 预定义收集器")]),s._v(" "),a("p",[a("code",[s._v("Collectors")]),s._v("类提供了很多工厂方法创建的收集器，它们主要提供了三大功能：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("将流元素归约和汇总为一个值")])]),s._v(" "),a("li",[a("p",[s._v("元素分组")])]),s._v(" "),a("li",[a("p",[s._v("元素分区")])])]),s._v(" "),a("h2",{attrs:{id:"_6-2-归约和汇总"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-归约和汇总"}},[s._v("#")]),s._v(" 6.2 归约和汇总")])],1)}),[],!1,null,null,null);t.default=r.exports}}]);