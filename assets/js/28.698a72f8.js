(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{374:function(t,e,_){"use strict";_.r(e);var s=_(33),v=Object(s.a)({},(function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"n001-并发连接数与请求数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#n001-并发连接数与请求数"}},[t._v("#")]),t._v(" N001 并发连接数与请求数")]),t._v(" "),_("Seal",{attrs:{title:"并发连接数与请求数",createDate:"2021.12.14"}}),t._v(" "),_("h2",{attrs:{id:"_1-基本概念"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-基本概念"}},[t._v("#")]),t._v(" 1 基本概念")]),t._v(" "),_("p",[_("strong",[t._v("并发连接数 - SBC（Simultaneous Browser Connections）")])]),t._v(" "),_("p",[t._v("并发连接数指的是客户端向服务器发起请求，并建立了TCP连接。每秒钟服务器链接的总TCP数量，就是并发连接数。")]),t._v(" "),_("p",[_("strong",[t._v("请求数 - QPS（Query Per Second） / RPS（Request Per Second）")])]),t._v(" "),_("p",[t._v("请求数指的是客户端在建立完连接后，每秒完成向http服务发出数据包并接收服务器返回请求结果这个过程的数量。")]),t._v(" "),_("h2",{attrs:{id:"_2-连接与请求的关系"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-连接与请求的关系"}},[t._v("#")]),t._v(" 2 连接与请求的关系")]),t._v(" "),_("p",[t._v("服务器返回请求结果后有两种情况：")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("HTTP数据包头包含Close字样，关闭本次TCP连接；")])]),t._v(" "),_("li",[_("p",[t._v("HTTP数据包头包含Keep-Alive字样，本次连接不关闭，可继续通过该连接向HTTP服务发送请求，用于减少TCP并发连接数（节约重新打开连接的时间）。")])])]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("HTTP与长连接")]),t._v(" "),_("p",[t._v("HTTP 1.0版本协议一般情况下不支持长连接，因此在每次请求发送完毕之后，TCP连接即会断开，因此一个TCP发送一个HTTP请求。")]),t._v(" "),_("p",[t._v("想要HTTP 1.0版本协议支持长连接，需要在请求头中加入"),_("code",[t._v("Connection: Keep-Alive")]),t._v("，可以使TCP连接保持在活跃状态。")]),t._v(" "),_("p",[t._v("HTTP 1.1版本协议支持了长连接，因此只要TCP连接不断开，便可以一直发送HTTP请求，持续不断，没有上限。")]),t._v(" "),_("p",[t._v("如果HTTP 1.1版本协议不希望使用长连接，则要在请求头中加上"),_("code",[t._v("Connection: Close")]),t._v("，接收到这个请求头的对端服务就会主动关闭TCP连接。")]),t._v(" "),_("p",[t._v("同样，HTTP 2.0版本协议支持多用复用，一个TCP连接是可以并发多个HTTP请求的，同样也是支持长连接，因此只要不断开TCP的连接，HTTP请求数也是可以没有上限地持续发送。")]),t._v(" "),_("p",[_("strong",[t._v("协议做了如上的规定，但实际上是否支持长连接，还是要看服务器（比如tomcat）和客户端（比如浏览器）的具体实现。")])])])],1)}),[],!1,null,null,null);e.default=v.exports}}]);